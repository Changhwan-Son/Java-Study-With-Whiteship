# 1주차 과제: JVM은 무엇이며 자바 코드는 어떻게 실행하는 것인가.


## JVM이란 무엇인가 

### JVM이란?
> Java Virtual Machine
```
공부 전 내가 아는 것은 자바 바이트 코드를 OS가 이해할 수 있도록 바꿔주는 가상 머신..?
```

자바 프로그램은 완전한 기계어가 아닌, 중간 단계의 바이트 코드로 이루어져 있다. 따라서 운영체제는 자바 프로그램을 바로 실행할 수 없다. 이 바이트 코드를 해석하고 실행할 수 있는 가상의 운영체제가 필요하다. JVM이 이 역할을 수행해 자바 프로그램을 실행한다. 

운영체제별로 프로그램을 실행하고 관리하는 방법이 다르기 때문에 운영체제별로 자바 프로그램을 별도로 개발하는 것보다는 운영체제와 자바 프로그램을 중계하는 JVM을 두어 자바 프로그램이 여러 운영체제에서 동일한 실행 결과가 나오도록 설계하였다. 따라서 개발자는 운영체제와 상관없이 자바 프로그램을 개발할 수 있다. 

> 자바 바이트 코드를 각 운영체제가 이해할 수 있는 기계어로 바꿔 실행시켜주는 역할을 한다.

<br>


## 컴파일 하는 방법

### 정의
자바 프로그램을 실행하기 위해서는 먼저 확장명이 .java인 텍스트 파일에 코드를 작성한다. 이것을 자바 소스 파일이라고 한다. 이후 컴파일러(javac.exe)를 이용해 컴파일하여 소스 파일을 확장명이 .class인 바이트 코드 파일을 생성한다. 

javac : 자바 소스 파일(.java)을 바이트 코드 파일(.class)로 변환시켜주는 명령어 
사용법 : javac \<option> \<source file> 

### 옵션

-d : 클래스 파일 생성할 디렉토리 지정

-classpath \<path> : 참조할 클래스파일 절대경로 지정

-target 자바버전 : 지정된 자바 버전의 JVM에서 작동되어지도록 클래스 파일 생성 
```
javac Hello.java
```

<br>



## 실행하는 방법 

바이트 코드 파일은 완전한 기계어가 아니므로 단독으로 실행될 수 없다. 그래서 JVM이 실행되어야 한다. 
JVM 실행 명령어는 java.exe 이다. 여기서 주의할 점은 바이트 코드 파일 입력 시 .class 확장자는 빼고 입력해야 한다. 

```
java Hello
```
java.exe 명령어가 실행되면 JVM은 바이트 코드 파일(.class)을 메로리에 올리고, 최적의 기계어로 변환한다. 그리고 main 메소드를 찾아 실행시킨다. 


<br>



## 바이트코드란 무엇인가 

바이트코드란 자바 가상 머신(JVM)이 이해할 수 있는 언어로 변환된 자바 소스 코드를 의미한다. 자바 컴파일러에 의해 변환되며, 코드의 명령어 크기가 1바이트라서 바이트코드라 불린다고 한다. 파일 확장자명은 .class 이며, JVM만 있으면 어떠한 운영체제에서도 실행될 수 있다. 

<br>


## JIT 컴파일러란 무엇이며 어떻게 동작하는지 
> Just In Time 

 JIT 컴파일러는 프로그램을 실행하는 시점에 기계어로 번역해주는 컴파일러를 말한다. 기계어로 번역하는 컴파일은 자바 인터프리터와 JIT 컴파일러 모두 수행하는데, 인터프리터는 한줄씩 해석 후 실행하고, JIT 컴파일러는 매번 해석하지 않고 전체 코드를 캐싱한 후, 바뀐 부분만 컴파일하고 나머지는 캐싱된 코드를 사용한다. 이를 동적 번역이라고도 한다. 그래서 JIT 컴파일러는 인터프리터의 속도를 개선할 수 있다. 


<br>


## JVM 구성 요소 

JVM은 클래스 로더, 실행 엔진, 가비지 컬렉터로 구성되어 있다. 

1. 클래스 로더(Class Loader)
- JVM 내로 클래스 파일(.class)을 로드하고 배치하는 모듈로 런타임시 동적으로 클래스를 로드한다.

2. 실행 엔진 
- 클래스 로더에 의해 배치된 클래스 파일을 실행시킨다. 클래스 파일은 바이트코드기 때문에 이를 기계어로 변환하는데 이 떄 두가지 방식을 사용한다. (인터프리터, JIT)

3. 가비지 컬렉터 
- 동적으로 할당된 메모리 중 사용되지 않는 메모리를 반환한다. 실행 시기는 JVM이 OS에 메모리를 추가적으로 요청했을 때 실행되고, 계속 돌아가는 서버 프로그램인 경우, JVM이 여유로운 시점이 실행된다. 


<br>


## JDK와 JRE의 차이 

### JDK
> 자바 개발 키트 (Java Development Kit)

자바의 모든 기능을 갖춘 SDK(Software Development Kit). 
프로그램 개발에 필요한 자바 가상 머신(JVM), 라이브러리 API, 컴파일러 및 디버거 등의 개발 도구가 포함되어 있다.

### JRE
> 자바 런타임 환경 (Java Runtime Environment)

프로그램 실행에 필요한 자바 가상 머신(JVM)과 라이브러리 API를 포함하는, 컴파일된 Java 프로그램을 실행하는 데 필요한 모든 패키지 

### 정리
JRE = JVM + 표준 클래스 라이브러리

JDK = JRE + 개발에 필요한 도구 

JRE는 이미 개발된 프로그램 실행만 가능하다. 개발을 하려면 JDK가 필요하다. 


<br>



## 출처

JVM
- [책] 이것이 자바다 - 신용권 
- [블로그] https://longbeom.tistory.com/15

JIT 컴파일러 
- [블로그] https://medium.com/@ahn428/java-jit-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC-c7d068e29f45

JRE, JDK
- [책] 이것이 자바다 - 신용권 